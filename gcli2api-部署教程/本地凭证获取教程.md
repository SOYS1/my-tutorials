# Gemini CLI 本地凭证获取教程

## 安装指南

### Termux 环境
每次开启termux运行这个脚本即可，进程会自动后台运行
```
curl -o termux-install.sh "https://raw.githubusercontent.com/su-kaka/gcli2api/refs/heads/master/termux-install.sh" && chmod +x termux-install.sh && ./termux-install.sh
```

### Windows 环境
初始安装，选择一个你喜欢的文件夹，右键选择打开控制台
```powershell
iex (iwr "https://raw.githubusercontent.com/su-kaka/gcli2api/refs/heads/master/install.ps1" -UseBasicParsing).Content
```
下一次需要启动：双击执行`start.bat`

### Linux 环境
初始安装
```
curl -o install.sh "https://raw.githubusercontent.com/su-kaka/gcli2api/refs/heads/master/install.sh" && chmod +x install.sh && ./install.sh
```
下一次需要启动：
```
cd gcli2api
bash start.sh
```

## 配置说明

### 1. 访问认证页面
访问 `http://127.0.0.1:7861/auth`

### 2. 使用默认认证
- 认证名称: `pwd`
- 使用默认 OAuth 认证

## 详细使用教程

### 1. 安装 Gemini CLI
使用 npm 全局安装官方 Gemini CLI 工具：
```
npx https://github.com/google-gemini/gemini-cli
```

### 2. 选择认证凭证
运行命令后选择选项 1（用户认证）：
```
? 选择认证方式 › - 使用箭头键选择，按回车确认
❯ 用户认证 (User Authentication)
  服务账号认证 (Service Account Authentication)
```

### 3. 完成浏览器认证
按回车确认后，系统会自动打开浏览器完成 Google 账户认证：
- 在浏览器中选择要使用的 Google 账户
- 授予必要的 API 访问权限
- 认证完成后会自动返回命令行

### 4.获取凭证文件
认证成功后，系统会自动生成 JSON 凭证文件：
- 文件位置：`./geminicli/creds/` 目录
- 文件名格式：`credentials_*.json`
- 包含完整的 API 访问凭证信息

## 故障排除：400 错误

如果遇到 400 Bad Request 错误，通常是由于认证配置问题导致的。
**解决方案：**
1.  删除旧的认证配置
2.  重新运行认证流程
3.  删除缓存文件
    ```bash
    rm -rf ~/.gemini/creds-*.json
    ```

## 注意事项

- **本地主机 (localhost) 访问**: 必须通过 `http://127.0.0.1:7861/auth` 访问，才能正确生成 JSON 凭证。
- **GitHub 项目地址**: [https://github.com/su-k-a/gcli2api](https://github.com/su-k-a/gcli2api)
